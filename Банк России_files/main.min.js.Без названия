app={utils:{}},app.utils.getDirection={direction:1,lastScrollTop:0,init:function(){var e=this;app.dom.$window.scroll(function(){var t=app.dom.$window.scrollTop();e.lastScrollTop!==t&&(e.lastScrollTop<t?e.direction=1:e.direction=-1,e.lastScrollTop=t)})}},app.findWithRoot=function(t,e){var a=$(t),i=a.find(e);return a.is(e)&&(i=i.add(a)),i},app.formatNumber=function(t){return String(t).replace(/(?=\B(?:\d{3})+\b)/g," ")},app.createChartTooltipPositioner=function(b){return function(a,i,n){function t(t){var e="x"===t;return[t,e?d:c,e?a:i].concat([e?a:i,e?n.plotX+l.plotLeft:n.plotY+l.plotTop,e?l.plotLeft:l.plotTop,e?l.plotLeft+l.plotWidth:l.plotTop+l.plotHeight])}function e(t,e,a,i,n,o,r){var l="y"===t?function(t){return g?t*g.scaleY:t}(u):function(t){return g?t*g.scaleX:t}(u),s=(a-i)/2,d=i<n-u,c=n+u+i<e,p=n-l-a+s,f=n+l-s;if(v&&c)h[t]=f;else if(!v&&d)h[t]=p;else if(d)h[t]=Math.min(r-i,p-m<0?p:p-m);else{if(!c)return!1;h[t]=Math.max(o,e<f+m+a?f:f+m)}}function o(t){var e=p;p=f,f=e,r=t}var r,l=this.chart,u=this.distance,h={},m=l.inverted&&n.h||0,s=this.outside,d=s?doc.documentElement.clientWidth-2*u:l.chartWidth,c=s?Math.max(doc.body.scrollHeight,doc.documentElement.scrollHeight,doc.body.offsetHeight,doc.documentElement.offsetHeight,doc.documentElement.clientHeight):l.chartHeight,g=l.containerScaling,p=t("y"),f=t("x"),v=!this.followPointer&&function(){for(var t=arguments,e=t.length,a=0;a<e;a++){var i=t[a];if(null!=i)return i}}(n.ttBelow,!l.inverted==!!n.negative),_=function(){!1!==e.apply(0,p)?!1!==function(t,e,a,i,n){var o;return n<u||e-u<n?o=!1:h[t]=n<a/2?1:e-i/2<n?e-i-2:n-a/2,o}.apply(0,f)||r||(o(!0),_()):r?h.x=h.y=0:(o(!0),_())};return(l.inverted||1<this.len)&&o(),_(),h.y=b,h}},app.chartTooltipPositioner=app.createChartTooltipPositioner(10),app.chartLegendDataHighlighter=function(t,e){var n,o=$("#"+t),r="pie"===e.options.chart.type,a=o.find(".chart-legend").length;function l(t){return r?e.series[0].data[t]:e.series[t]}for(var s=0;s<a;s++)!function(a){var t=r?l(s).series.options:l(s).options;if(!t.dataLabels||!t.dataLabels.enabled){var i=(r?".highcharts-color-":".highcharts-series-")+a+" .chart-legend";try{o.get(0).addEventListener("mouseover",function(t){var e=$(t.target);n!==a&&e.is($(i))&&(null!=n&&l(n).update({dataLabels:{enabled:!1}},!1),l(a).update({dataLabels:{enabled:!0}}),n=a)},!0)}catch(t){console.error(t)}}}(s);function i(){null!=n&&(l(n).update({dataLabels:{enabled:!1}}),n=null)}o.add(o.find(".highcharts-legend")).on("mouseleave",i),o.find(".highcharts-root").on("mouseenter",i)},app.createChartSharedTooltipFormatter=function(a){return function(){return this.points.slice().sort(function(t,e){return t.point.plotY-e.point.plotY}).reduce(function(t,e){return t+'<div class="chart-tooltip-line"><div class="chart-tooltip-dot" style="color:'+e.color+'">●</div>'+(a?"":'<div class="chart-tooltip-series">'+e.series.name+": </div>")+'<div class="chart-tooltip-value">'+e.y+(e.series.options.units||"")+"</div></div>"},'<div class="chart-tooltip-header">'+this.x+"</div>")}},app.chartAutoHeight=function(t,e,a,i){a=a||30,i=i||400;var n,o=$("#"+t),r=!1;function l(){if(!e.options.legend.floating){if(!r)return;return e.update({legend:{y:null}}),void o.css("height","")}var t=e.legend.legendHeight+a;e.update({legend:{y:t}}),o.css("height",t+e.chartHeight+"px"),r=!0}setTimeout(l,i),$(window).on("resize",function(){clearTimeout(n),n=setTimeout(l,i)})},app.charts=function(){"undefined"!=typeof Highcharts&&Highcharts.setOptions({title:{text:""},subtitle:{text:""},chart:{height:400,spacingBottom:0},xAxis:{gridLineWidth:0,labels:{style:{color:"#2b2e33"}}},yAxis:{gridLineWidth:1,lineColor:"#E8E9EB",labels:{style:{color:"#2b2e33"}},title:{x:-17,margin:0,style:{color:"#2b2e33"}}},responsive:{rules:[{condition:{maxWidth:927},chartOptions:{chart:{height:300}}}]},tooltip:{useHTML:!0,headerFormat:'<div class="chart-tooltip-header">{point.key}</div>',pointFormat:'<div class="chart-tooltip-line"><div class="chart-tooltip-dot" style="color:{point.color}">●</div><div class="chart-tooltip-series">{series.name}: </div><div class="chart-tooltip-value">{point.y}</div></div>',style:{color:"#ffffff",fontSize:14},padding:0,shadow:!1,backgroundColor:"#36383d",borderRadius:8,borderColor:"#36383d"},legend:{useHTML:!0,labelFormat:'<span class="chart-legend-dot" style="color:{color}">●</span><span class="chart-legend">{name}</span>',itemDistance:16,itemMarginBottom:8,itemMarginTop:0,padding:0,squareSymbol:!1,symbolWidth:0,symbolPadding:0,symbolRadius:0,align:"left",maxHeight:1/0,floating:!0,width:"100%",x:-7},credits:{enabled:!1},plotOptions:{series:{point:{events:{legendItemClick:function(){return!1}}},events:{legendItemClick:function(){return!1}}},column:{borderWidth:0,pointPadding:0,groupPadding:.12},columnrange:{stacking:"normal",pointPadding:0,groupPadding:.1,borderWidth:0}}})},app.charts(),app.JQueryInputHooks=function(){function l(t,e,a){if($.expr.match.bool.test(a))return!1===e?jQuery.removeAttr(t,a):t.setAttribute(a,a),a}function t(t,e){$(t).trigger("input-hook",[{type:"set-value",value:e}])}function e(t,e,a){"INPUT"!==t.tagName&&"SELECT"!==t.tagName||$(t).trigger("input-hook",[{type:"set-attr",value:e,attr:a}])}function a(t,e,a,i){var n=i?"set":"get",o=$[t][e]||{},r=($[t][e]=o)[n];!r&&"attrHooks"===t&&i&&(r=l),$[t][e][n]=function(){var t=arguments;return setTimeout(function(){a.apply(this,t)}),r?r.apply(this,arguments):void 0}}a("valHooks","input",t,!0),a("valHooks","select",t,!0),a("valHooks","textarea",t,!0),a("attrHooks","disabled",e,!0),a("propHooks","disabled",e,!0),a("attrHooks","checked",e,!0),a("propHooks","checked",e,!0)},app.JQueryInputHooks(),$(function(){app.dom={$window:$(window),$document:$(document),$body:$("body"),$header:$("#header")},app.l10n=window.appLocalization,app.utils.getDirection.init(),app.init(document),app.dom.$document.on("new-html",function(t){app.init(t.target)}),setTimeout(function(){app.dom.$document.trigger("app-ready")}),-1!==navigator.appVersion.indexOf("MSIE 10")&&setTimeout(function(){app.dom.$body.addClass("ie10")})}),app.init=function(t){try{app.materialsGall(t)}catch(t){console.error(t)}try{app.bannersGall(t)}catch(t){console.error(t)}try{app.gotoUp(t)}catch(t){console.error(t)}try{app.homeHeaderGall(t)}catch(t){console.error(t)}try{app.dropdown(t)}catch(t){console.error(t)}try{app.tips(t)}catch(t){console.error(t)}try{app.topLine(t)}catch(t){console.error(t)}try{app.homeContentAnimation(t)}catch(t){console.error(t)}try{app.tabs(t)}catch(t){console.error(t)}try{app.homeTabs(t)}catch(t){console.error(t)}try{app.toggle(t)}catch(t){console.error(t)}try{app.homeBannersGall(t)}catch(t){console.error(t)}try{app.versions(t)}catch(t){console.error(t)}try{app.homeMenuButton(t)}catch(t){console.error(t)}try{app.helpful(t)}catch(t){console.error(t)}try{app.searchHelpful(t)}catch(t){console.error(t)}try{app.requestHelpful(t)}catch(t){console.error(t)}try{app.openAnchor(t)}catch(t){console.error(t)}try{app.tables(t)}catch(t){console.error(t)}try{app.imageSlider(t)}catch(t){console.error(t)}try{app.shareBtn(t)}catch(t){console.error(t)}try{app.ajaxNews(t)}catch(t){console.error(t)}try{app.ajaxPreviews(t)}catch(t){console.error(t)}try{app.ajaxAbout(t)}catch(t){console.error(t)}try{app.ajaxCross(t)}catch(t){console.error(t)}try{app.rouble(t)}catch(t){console.error(t)}try{app.calendar(t)}catch(t){console.error(t)}try{app.orgStructure(t)}catch(t){console.error(t)}try{app.filters(t)}catch(t){console.error(t)}try{app.datepicker(t)}catch(t){console.error(t)}try{app.datepickerPeriod(t)}catch(t){console.error(t)}try{app.monthpicker(t)}catch(t){console.error(t)}try{app.monthpickerPeriod(t)}catch(t){console.error(t)}try{app.yearpickerPeriod(t)}catch(t){console.error(t)}try{app.menu(t)}catch(t){console.error(t)}try{app.homeHeaderGallMobile(t)}catch(t){console.error(t)}try{app.event(t)}catch(t){console.error(t)}try{app.sorting(t)}catch(t){console.error(t)}try{app.tabsWithFilters(t)}catch(t){console.error(t)}try{app.searchForm(t)}catch(t){console.error(t)}try{app.textareaCounter(t)}catch(t){console.error(t)}try{app.textInput(t)}catch(t){console.error(t)}try{app.fileInput(t)}catch(t){console.error(t)}try{app.select(t)}catch(t){console.error(t)}try{app.radioCheckbox(t)}catch(t){console.error(t)}try{app.addField(t)}catch(t){console.error(t)}try{app.toggleSelectPopup(t)}catch(t){console.error(t)}try{app.scrollToContentBtn(t)}catch(t){console.error(t)}try{app.videoStub(t)}catch(t){console.error(t)}try{app.accessibility(t)}catch(t){console.error(t)}try{app.export(t)}catch(t){console.error(t)}try{app.popupCookies(t)}catch(t){console.error(t)}try{app.popup(t)}catch(t){console.error(t)}try{app.trAsLink(t)}catch(t){console.error(t)}try{app.inputHiddenField(t)}catch(t){console.error(t)}try{app.newsMainText(t)}catch(t){console.error(t)}try{app.checkboxAllSelect(t)}catch(t){console.error(t)}try{app.banknotesPoints(t)}catch(t){console.error(t)}try{app.brandbook(t)}catch(t){console.error(t)}try{app.lineCutter(t)}catch(t){console.error(t)}try{app.mobileTooltip(t)}catch(t){console.error(t)}try{app.homeStickyMenu(t)}catch(t){console.error(t)}try{app.popupOldVersionSite(t)}catch(t){console.error(t)}app.findWithRoot(t,":input").inputmask()},app.popupOldVersionSite=function(t){var e=app.findWithRoot(t,"[data-old-site-version]"),a=e.find("[data-old-site-version-close]");if(e.length){var i="old-version-site";!!document.cookie.match(new RegExp("(?:^|; )"+i+"=([^;]*)"))||(e.show(),a.on("click",function(){document.cookie=i+"=1; path=/; max-age=31536000‬",e.hide()}))}},app.homeStickyMenu=function(t){var e=app.findWithRoot(t,"[data-home-sticky]"),a=e.parent(),i=app.findWithRoot(t,".top-line"),n=app.findWithRoot(t,".tab_selected"),o=app.findWithRoot(t,".tabs_items");if(e.length){function r(){if(!a.length)return!1;n.hasClass("_active")&&(n.removeClass("_active"),o.hide());var t=a[0].getBoundingClientRect();t.top>i.height()||t.bottom<e.outerHeight()?e.hasClass("_fixed")&&e.removeClass("_fixed").width(""):t.top<=0&&!e.hasClass("_fixed")&&e.addClass("_fixed").width(t.width)}r(),a.find("a").on("click",function(t){var e=a.offset();$("html, body").stop().animate({scrollTop:e.top-i.height()},300,"swing")}),app.dom.$window.on("scroll",r),app.dom.$window.on("resize",function(){e.hasClass("_fixed")&&e.width(a.width())})}},app.mobileTooltip=function(){var e=$('<div class="mobile-tooltip" />').hide(),a=$("<div />").appendTo(e);return $('<div class="mobile-tooltip_close" />').on("click",function(){e.hide(),a.html("")}).appendTo(e),function(t){e.appendTo(app.dom.$body),app.findWithRoot(t,"[data-mobile-tooltip-content]").on("click",function(){a.html($(this).data("mobile-tooltip-content")),e.show()})}}(),app.lineCutter=function(t){app.findWithRoot(t,"[data-line-cutter]").each(function(){var t=$(this),e=+t.data("line-cutter");function a(){setTimeout(function(){t.line(e,"...")})}e&&(setTimeout(a),app.dom.$window.on("resize",a))})},app.brandbook=function(t){var e=app.findWithRoot(t,"[data-brandbook]");if(e.length){var a=app.findWithRoot(t,"[data-brandbook-variant]");a.on("click",function(){var t=$(this);t.siblings().removeClass("_active"),t.addClass("_active"),i()}),i()}function i(){var t=a.filter("._active").map(function(){return"brandbook-"+$(this).data("brandbook-variant")}).get().join(" ");e.attr("class","brandbook").addClass(t)}},app.banknotesPoints=function(t){app.findWithRoot(t,"[data-point-container]").each(function(){var a=$(this).find("[data-point]"),d=a.length,i=null,n=null;function c(t){a.eq(t).removeClass("_active"),app.dom.$document.off("click",n),i=null}function p(e){if(i!==e){null!==i&&c(i);var o=a.eq(e);i=e,o.addClass("_active"),n=function(t){$(t.target).closest(o).length||c(e)},app.dom.$document.on("click",n),setTimeout(function(){var t=o.find("[data-point-info]"),e=app.dom.$window.scrollTop(),a=app.dom.$window.height(),i=t.offset().top-e,n=i+t.outerHeight();i<0?$("html, body").stop().animate({scrollTop:e+i-a/2},300,"swing"):a<n&&$("html, body").stop().animate({scrollTop:e+n-a/2},300,"swing")})}}a.each(function(t){var a=$(this),e=a.find("[data-point-open]"),i=a.find("[data-point-close]"),n=a.find("[data-point-info]"),o=a.find("[data-point-counter]"),r=a.find("[data-point-prev]"),l=a.find("[data-point-next]");function s(){var t=a.offset().left+a.outerWidth()/2,e=app.dom.$window.width();n.removeClass("_left _right _top"),888<t?n.addClass("_left"):800<e-t?n.addClass("_right"):n.addClass("_top")}s(),a.closest("[data-tabs-content]").on("show-hidden",s),app.dom.$window.on("resize",s),o.text(t+1+" / "+d),r.on("click",function(){return p(0===t?d-1:t-1),!1}),l.on("click",function(){return p(t===d-1?0:t+1),!1}),e.on("click",function(){p(t)}),i.on("click",function(){c(t)})})})},app.checkboxAllSelect=function(t){var d="data-select-all";app.findWithRoot(t,"["+d+"]:not(:checkbox)").each(function(){var t=$(this),e=t.attr(d),a=e?t.parent().parent():t.parent(),i=t.children(":eq(0)"),n=t.children(":eq(1)"),o=!0,r=(e?"["+d+'="'+e+'"]':"")+":checkbox:enabled";function l(){return a.find(r)}function s(){var t=l();o=t.length!==t.filter(":checked").length,i.toggle(o),n.toggle(!o)}t.on("click",function(){l().prop("checked",o)}),a.on("change input-hook",function(t,e){$(t.target).is(":checkbox")&&(e&&"set-attr"!==e.type||s())}),s()})},app.newsMainText=function(t){var n=app.findWithRoot(t,"[data-news-main-container]"),o=n.find("[data-news-main-text]");if(n.length&&o.length){var r=o.html();a();var e=i();app.dom.$window.on("resize",function(){i()-e<=200||(setTimeout(a,200),e=i())})}function a(){o.css({display:"none",height:"",margin:""});var t=n.height(),e=r.split(/<br *\/?>/).map(function(t){return t?t.split(" "):[]});if(o.html(".").css({display:"block",visibality:"hidden"}),n.height()>t)return o.html(r),void o.css({display:"block",height:"0",margin:"0"});o.html(r);t:for(var a=e.length-1;0<=a;a--){for(var i=!1;e[a].length;){if(n.height()<=t)break t;o.html(e.map(function(t){return t.join(" ")}).join("<br>")+(i?"...":"")),i=!0,e[a].pop()}e.pop()}o.css({visibality:""})}function i(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()}},app.inputHiddenField=function(t){app.findWithRoot(t,"[data-input-hidden-id]").each(function(){var e=$(this),t=e.data("input-hidden-id"),a=$("#"+t),i=e.is("option");function n(t){a.toggle(i?e.closest("select").val()===e.attr("value"):e.is(":checked"))}var o=i?e.closest("select"):e.closest("form").find('input[type="'+e.attr("type")+'"][name="'+e.attr("name")+'"]');o.on("change",n),o.on("input-hook",n),n()})},app.popupCookies=function(t){var e=app.findWithRoot(t,"[data-popup-cookies]"),a=e.find("[data-popup-cookies-btn]");if(e.length){!!document.cookie.match(new RegExp("(?:^|; )accept=([^;]*)"))||(e.addClass("_open"),a.on("click",function(){document.cookie="accept=1; path=/; max-age=31536000‬",e.removeClass("_open")}))}},app.popup=function(t){var e=app.findWithRoot(t,"[data-popup-open]"),a=app.findWithRoot(t,"[data-popup-close]");e.on("click",function(t){var e=$(this).attr("data-popup-open"),a=$('[data-popup="'+e+'"]');a.data("body-overflow",document.body.style.overflow),document.body.style.overflow="hidden",a.addClass("_open"),t.preventDefault()}),a.on("click",function(t){var e=$(this).closest("[data-popup]");document.body.style.overflow=e.data("body-overflow")||"",e.removeClass("_open"),t.preventDefault()})},app.accessibility=function(t){app.findWithRoot(t,".footer_menu_item._visually-impaired a").on("click",function(){return $("html").toggleClass("vision-impaired"),window.localStorage&&localStorage.setItem("vision-impaired",!!$("html").hasClass("vision-impaired")||""),!1})},app.trAsLink=function(t){app.findWithRoot(t,"tr[data-tr-link]").on("click",function(t){var e=$(this).attr("data-tr-link");e&&(window.location=e)})},app.videoStub=function(t){if($('meta[name="cbr:intranet"][content="true"]').length){var e=app.findWithRoot(t,".media > .video-scale");e.children().remove(),$('<div class="video-stub"><img src="/common/images/icons/video-stub.svg" alt="видео недоступно" /><span>Данное видео доступно <br>только в сети интернет</span></div>').appendTo(e)}},app.scrollToContentBtn=function(t){app.findWithRoot(t,"[data-scroll-to-content]").on("click",function(){$("html, body").stop().animate({scrollTop:app.dom.$window.height()},300,"swing")})},app.fileInput=function(t){app.findWithRoot(t,"[data-file-input]").each(function(){var i=$(this),r=i.find(".file-input_files"),t=i.find('input[type="file"]'),e=i.find(".file-input_input"),a=i.find(".file-input_delete-all"),l=t.data("fileextensions"),s=+t.data("maxfilenamesize"),n=+t.data("maxfilescount"),o=+t.data("maxfilesize");function d(){var e=0,a=0;i.find(".file-input_file").each(function(){var t=$(this).data("file");e+=t.size,a++});var t="";o<e?t=app.l10n.file.maxSizeErr:n<a&&(t=app.l10n.file.maxCountErr),i.toggleClass("_error",!!t),i.find(".file-input_error-name").html(t),i.toggleClass("_delete-all",2<=a)}function c(t){Array.prototype.map.call(t||[],function(t){var e=(t.name.match(/\.[^.]+?$/)||[""])[0],a=t.name.slice(0,-e.length),i=e.slice(1).toUpperCase(),n=function(t){return t?10485760<=t?Math.round(t/1048576)+" "+app.l10n.file.mb:1048576<=t?(t/1048576).toFixed(1).replace(".",",")+" "+app.l10n.file.mb:10240<=t?Math.round(t/1024)+" "+app.l10n.file.kb:1024<=t?(t/1024).toFixed(1).replace(".",",")+" "+app.l10n.file.kb:t+" "+app.l10n.file.b:""}(t.size),o=!1;l.indexOf(i)<0?o=app.l10n.file.formatErr:t.name.length>s&&(o=app.l10n.file.nameSizeErr.replace("$value$",s));$('<div class="file-input_file'+(o?" _error":"")+'">  <div class="file-input_name"><span>'+a+"</span><span>"+e+'</span></div>  <div class="file-input_info">'+n+'    <div class="file-input_delete"></div>  </div>'+(o?'<div class="file-input_additional">'+o+"</div>":"")+"</div>").data("file",t).appendTo(r)}),d()}e.on("dragover",function(){return $(this).addClass("_dragging"),!1}),e.on("dragleave",function(){return $(this).removeClass("_dragging"),!1}),e.on("drop",function(t){return $(this).removeClass("_dragging"),c(t.originalEvent.dataTransfer.files),!1}),t.on("change",function(){c(t.get(0).files),t.prop("value",null)}),i.on("click",".file-input_delete",function(){$(this).closest(".file-input_file").remove(),d()}),a.on("click",function(){i.find(".file-input_file").remove(),d()})})},app.textInput=function(t){app.findWithRoot(t,"[data-text-input]").each(function(){var e=$(this),a=e.find("input"),t=e.find(".input_label"),i=$('<div class="text-input_clear" />').appendTo(t);if(e.is("._filter")){var n=e.find(".input_label"),o=e.find(".input_placeholder"),r=e.find(".datepicker-filter"),l=e.find(".datepicker-filter_button"),s=e.find(".datepicker-filter_datepicker, .datepicker-filter_datepicker-from, .datepicker-filter_datepicker-to"),d=e.find(":input");function c(){var t=!0;a.each(function(){t=t&&!!$(this).val()}),e.toggleClass("_value",t)}function p(){e.toggleClass("_focus",r.is("._open"))}function f(){e.toggleClass("_disabled",!!d.attr("disabled"))}n.on("click",function(t){l.attr("disabled")||((n.is(t.target)||o.is(t.target))&&setTimeout(function(){l.trigger("click")}),t.preventDefault())}),r.on("click",function(){setTimeout(p)});try{s.each(function(){this.addEventListener("click",function(){setTimeout(p),setTimeout(c)},!0)})}catch(t){console.error(t),s.on("click",function(){c(),p()})}i.on("click",function(){r.trigger("filter-clear"),c(),p()}),app.dom.$document.on("click",function(){setTimeout(p)}),setTimeout(function(){f(),c()}),e.on("input-hook",function(t,e){c(),f(),p()})}else{function u(){e.toggleClass("_value",!!a.val()),e.toggleClass("_disabled",!!a.attr("disabled"))}a.on("focus blur",function(t){e.toggleClass("_focus","focus"===t.type)}),a.on("input",function(){e.toggleClass("_value",!!a.val())}),a.on("change",function(){a.trigger("filter-select")}),a.on("input-hook",u),i.on("click",function(){a.val(""),a.trigger("input"),a.trigger("change")}),u()}})},app.select=function(t){app.findWithRoot(t,"[data-select]").each(function(){var e=$(this),t=e.find("select");function a(){e.toggleClass("_value",!!t.val()),e.toggleClass("_disabled",t.is(":disabled"))}t.on("focus blur",function(t){e.toggleClass("_focus","focus"===t.type)}),e.toggleClass("_value",!!t.val()),t.on("change",function(){e.toggleClass("_value",!!t.val()),t.trigger("filter-select")}),t.on("input-hook",a),a()})},app.radioCheckbox=function(t){app.findWithRoot(t,'.radio input[type="radio"], .checkbox input[type="checkbox"]').on("change",function(){$(this).trigger("filter-select")})},app.sorting=function(t){var a=app.findWithRoot(t,"[data-sorting]");a.length&&(a.each(function(){var t=$(this),e=t.find("[data-sorting-title]"),a=t.find("[data-sorting-close"),i=t.find("[data-sorting-direction]"),n=i.find("input"),o=t.find("[data-sorting-items]"),r=o.find("input"),l="";function s(){l=r.filter(":checked").siblings("label").text(),e.text(l),o.hide()}function d(){var t=n.val();"down"===t&&"up"===t||n.prop("value","down"),"up"!==t?i.removeClass("_active"):i.addClass("_active")}e.on("click",function(){o.toggle()}),r.filter(":checked").length||r.first().prop("checked",!0),r.on("change",s),r.on("input-hook",function(t,e){"set-attr"===e.type&&"checked"===e.attr&&s()}),s(),a.on("click",function(){o.hide()}),d(),n.on("input-hook",function(t,e){"set-value"===e.type&&d()}),i.on("click",function(){var t=$(this),e=t.hasClass("_active")?"down":"up";n.prop("value",e),t.toggleClass("_active")})}),app.dom.$document.click(function(e){a.each(function(){var t=$(this);$(e.target).closest(t).length||t.find("[data-sorting-items]").hide()})}))},app.event=function(t){var e=app.findWithRoot(t,".event_application"),a=e.parent().parent().parent();e.length&&$(window).on("scroll",function(){if(e.is(":visible")){var t=e.hasClass("_fixed");a.get(0).getBoundingClientRect().bottom+e.height()*t<app.dom.$window.height()?t&&e.removeClass("_fixed"):t||e.addClass("_fixed")}})},app.monthpicker=function(t){app.findWithRoot(t,"[data-monthpicker-filter], [data-quarterpicker-filter]").each(function(){var o=$(this),r=o.find(".datepicker-filter_button"),l=o.find(".datepicker-filter_close"),t=o.find(".datepicker-filter_clear-btn"),s=o.find(".datepicker-filter_input"),d=o.find(".datepicker-filter_datepicker"),a=o.is("[data-quarterpicker-filter]"),c=a?"QuarterPicker":"MonthPicker",i=a?app.l10n[c].plugin.quarters:app.l10n[c].plugin.months.map(function(t){return t[0].toLowerCase()+t.slice(1)});function e(t){$.contains(o.get(0),t.target)||(o.removeClass("_open"),app.dom.$document.off("click",e),s.val()||o.trigger("clear-datepicker"))}function p(t){if(t&&(6===(t=String(t)).length&&(t="0"+t),/^\d\d(.|\/)\d\d\d\d$/.test(t))){var e=new Date;return e.setFullYear(+t.slice(-4),+t.slice(0,2)-1,1),e}}function f(t,e,a){return a=a||i[t.getMonth()]+" "+t.getFullYear(),e&&(a=e.replace("$$date$$",a)),a[0].toUpperCase()+a.slice(1)}function u(t){var e=t.getMonth()+1+app.l10n[c].separator+t.getFullYear();return 6!==e.length||a||(e="0"+e),e}var h=o.data("date-text"),n=s.val(),m=p(s.val()),g=o.data("default-value")||n;function v(){s.prop("value",""),d.addClass("_empty"),o.addClass("_empty").removeClass("_changed _modified _open"),r.html(app.l10n[c].emptyValue),app.dom.$document.off("click",e),o.trigger("clear-datepicker"),setTimeout(function(){o.trigger("filter-select")})}"number"==typeof g&&(g=String(g)),g&&o.toggleClass("_modified",n!==g),m?r.html(f(m,h)):(r.html(app.l10n[c].emptyValue),o.addClass("_empty")),d[c]({i18n:app.l10n[c].plugin,Animation:"none",MinMonth:p(o.data("min-date")),MaxMonth:p(o.data("max-date")),SelectedMonth:m,MonthFormat:"mm"+app.l10n[c].separator+"yy",OnAfterChooseMonth:function(t){var e=u(t);s.prop("value",e),s.trigger("input-hook",[{type:"set-value",value:e},!0])}}),s.on("input-hook",function(t,e,a){if("set-value"===e.type){var i=p(e.value),n=u(i);r.html(f(i,h)).removeClass("_empty"),o.removeClass("_open _empty").toggleClass("_modified",g!==n),a?s.trigger("filter-select"):d[c]("option",{SelectedMonth:i})}else"set-attr"===e.type&&"disabled"===e.attr&&(o.hasClass("_open")&&l.trigger("click"),r.attr("disabled",e.value))}),d.on("click",function(t){return t.stopPropagation(),!1}),s.data("datepickerElement",d),t.on("click",v),o.on("filter-clear",v),r.attr("disabled",!!s.is(":disabled")),r.add(l).on("click",function(){o.toggleClass("_open"),o.hasClass("_open")?(app.dom.$document.off("click",e),app.dom.$document.on("click",e),o.offset().left+o.width()/2>app.dom.$window.width()/2?o.addClass("_right"):o.removeClass("_right")):s.val()||o.trigger("clear-datepicker")})})},app.monthpickerPeriod=function(t){app.findWithRoot(t,"[data-monthpicker-period-filter], [data-quarterpicker-period-filter]").each(function(){var l,s,d,c,p=$(this),f=p.find(".datepicker-filter_button"),u=p.find(".datepicker-filter_close"),h=p.find(".datepicker-filter_apply-btn"),t=p.find(".datepicker-filter_clear-btn"),e=p.find(".datepicker-filter_modal"),i=p.find(".datepicker-filter_tab-from"),n=p.find(".datepicker-filter_tab-to"),m=p.find(".datepicker-filter_input-from"),g=p.find(".datepicker-filter_input-to"),a=p.find(".datepicker-filter_datepicker-from"),o=p.find(".datepicker-filter_datepicker-to"),r=p.is("[data-quarterpicker-period-filter]"),v=r?"QuarterPicker":"MonthPicker",_=app.l10n[v].plugin[r?"quarters":"months"],b=p.data("date-text"),k=function(t){return t};function w(t){$.contains(p.get(0),t.target)||(p.removeClass("_open"),app.dom.$document.off("click",w),l&&s?p.hasClass("_changed")&&p.trigger("filter-select"):R())}b&&(k=function(t){return b.replace("$$date$$",t)});var C=function(t){if(t&&(6===(t=String(t)).length&&(t="0"+t),/^\d\d(.|\/)\d\d\d\d$/.test(t))){t=String(t);var e=new Date;return e.setFullYear(+t.slice(-4),+t.slice(0,2)-1,1),e}},y=function(t){return t?_[t.getMonth()]+" "+t.getFullYear():"<span>"+app.l10n[v].emptyValue+"</span>"};function x(t){var e=t.getMonth()+1+app.l10n[v].separator+t.getFullYear();return 6!==e.length||r||(e="0"+e),e}function W(){var t=y(l),e=y(s),a=l||s?" - ":"<span> - </span>";i.html(t),n.html(e),f.html(k(t+a+e))}function R(t){l=s=void 0,m.add(g).prop("value",""),W(),p.removeClass("_changed _modified _open"),a.add(o).addClass("_empty"),a[v]("option","MaxMonth",o[v]("option","MaxMonth")),o[v]("option","MinMonth",a[v]("option","MinMonth")),a.add(o)[v]("Update"),app.dom.$document.off("click",w),p.trigger("clear-datepicker"),t&&setTimeout(function(){p.trigger("filter-select")})}function T(){if(p.hasClass("_open"))if(p.offset().left+2*p.outerWidth()/3>2*app.dom.$window.width()/3){if("left"===e.data("pos"))return;e.data("pos","left"),e.css("transform","translateX("+(-e.outerWidth()+f.outerWidth())+"px)")}else if(p.offset().left+p.outerWidth()/3>app.dom.$window.width()/3){if("center"===e.data("pos"))return;e.data("pos","center"),e.css("transform","translateX("+(-e.outerWidth()+f.outerWidth())/2+"px)")}else{if("right"===e.data("pos"))return;e.data("pos","right"),e.css("transform","")}}function M(n,o,a,r){p.data("date-text");var t=C(a.val());if(t){var e=a.val();r?d=p.data("default-value-from")||e:c=p.data("default-value-to")||e,r?l=t:s=t,o[v]("option",r?"MinMonth":"MaxMonth",t)}else h.attr("disabled",!0);n[v]("option",{i18n:app.l10n[v].plugin,Animation:"none",MinMonth:C(p.data("min-date"))||null,MaxMonth:C(p.data("max-date"))||null,SelectedMonth:t,MonthFormat:"mm"+app.l10n[v].separator+"yy",OnAfterChooseMonth:function(t){var e=x(t);a.val()!==e&&(a.prop("value",e),a.trigger("input-hook",[{type:"set-value",value:e},!0]))}}),a.on("input-hook",function(t,e,a){if("set-value"===e.type){var i=C(e.value);x(i);r?l=i:s=i,W(),T(),p.addClass("_tab-to _changed").toggleClass("_modified",d!==m.val()||c!==g.val()),n.removeClass("_empty"),o[v]("option",r?"MinMonth":"MaxMonth",i),a||n[v]("option",{SelectedMonth:i}),o[v]("Update"),l&&s&&h.removeAttr("disabled")}else"set-attr"===e.type&&"disabled"===e.attr&&(p.hasClass("_open")&&u.trigger("click"),f.attr("disabled",m.is(":disabled")||g.is(":disabled")))}),a.data("datepickerElement",n),n.on("click",function(t){return t.stopPropagation(),!1})}a.add(o)[v](),M(o,a,g,!1),M(a,o,m,!0),W(),"number"==typeof d&&(d=String(d)),"number"==typeof c&&(c=String(c)),(d||c)&&p.toggleClass("_modified",d!==m.val()||c!==g.val()),f.attr("disabled",!!m.add(g).is(":disabled")),i.on("click",function(){p.removeClass("_tab-to")}),n.on("click",function(){p.addClass("_tab-to")}),t.on("click",R),p.on("filter-clear",R),f.add(u).add(h).on("click",function(){p.toggleClass("_open"),p.hasClass("_open")?(p.removeClass("_tab-to"),app.dom.$document.off("click",w),app.dom.$document.on("click",w),T()):(e.data("pos",""),l&&s?p.hasClass("_changed")&&p.trigger("filter-select"):R())})})},app.datepicker=function(t){var g=["I","II","III"];app.findWithRoot(t,"[data-datepicker-filter], [data-decadepicker-filter]").each(function(){var n=$(this),o=n.find(".datepicker-filter_button"),r=n.find(".datepicker-filter_close"),t=n.find(".datepicker-filter_clear-btn"),l=n.find(".datepicker-filter_input"),s=n.find(".datepicker-filter_datepicker"),e=n.is("[data-decadepicker-filter]"),d=e?"decadepicker":"datepicker",a=n.data("date-text");function c(t){return e&&(t=g[t[0]-1]+t.slice(1)),a&&(t=a.replace("$$date$$",t)),t}function i(t){$.contains(n.get(0),t.target)||(n.removeClass("_open"),app.dom.$document.off("click",i),l.val()||n.trigger("clear-datepicker"))}var p=app.l10n[d].plugin.dateFormat;s[d]({yearRange:"-99:+99",changeMonth:!0,changeYear:!0,minDate:n.data("min-date"),maxDate:n.data("max-date"),dateFormat:p}),s[d]("option",app.l10n[d].plugin);try{var f=$[d].parseDate(p,l.val()),u=$[d].formatDate(p,f)}catch(t){}f?(o.html(c(u)),s[d]("setDate",f),l.prop("value",u)):(o.html(app.l10n[d].emptyValue),n.addClass("_empty"),s.addClass("_empty"));var h=n.data("default-value")||u;function m(){l.prop("value",""),s.addClass("_empty"),n.addClass("_empty").removeClass("_changed _modified _open"),o.html(app.l10n[d].emptyValue),app.dom.$document.off("click",i),n.trigger("clear-datepicker"),setTimeout(function(){n.trigger("filter-select")})}h&&n.toggleClass("_modified",u!==h),s[d]("option",{onSelect:function(t){l.prop("value",t),l.trigger("input-hook",[{type:"set-value",value:t},!0])}}),l.on("input-hook",function(t,e,a){if("set-value"===e.type){var i=e.value;o.html(c(i)),n.removeClass("_empty _open").toggleClass("_modified",i!==h),s.removeClass("_empty"),l.trigger("filter-select"),a||s[d]("setDate",f)}else"set-attr"===e.type&&"disabled"===e.attr&&(n.hasClass("_open")&&r.trigger("click"),o.attr("disabled",e.value))}),s.on("click",function(t){return t.stopPropagation(),!1}),l.data("datepickerElement",s),t.on("click",m),n.on("filter-clear",m),o.attr("disabled",!!l.is(":disabled")),o.add(r).on("click",function(){n.toggleClass("_open"),n.hasClass("_open")?(app.dom.$document.off("click",i),app.dom.$document.on("click",i),n.offset().left+n.width()/2>app.dom.$window.width()/2?n.addClass("_right"):n.removeClass("_right")):l.val()||n.trigger("clear-datepicker")})})},app.datepickerPeriod=function(t){var R=["I","II","III"];app.findWithRoot(t,"[data-datepicker-period-filter], [data-decadepicker-period-filter]").each(function(){var l,s,d,c,p=$(this),f=p.find(".datepicker-filter_button"),u=p.find(".datepicker-filter_close"),h=p.find(".datepicker-filter_apply-btn"),t=p.find(".datepicker-filter_clear-btn"),e=p.find(".datepicker-filter_modal"),i=p.find(".datepicker-filter_tab-from"),n=p.find(".datepicker-filter_tab-to"),m=p.find(".datepicker-filter_input-from"),g=p.find(".datepicker-filter_input-to"),a=p.find(".datepicker-filter_datepicker-from"),o=p.find(".datepicker-filter_datepicker-to"),r=p.is("[data-decadepicker-period-filter]"),v=r?"decadepicker":"datepicker",_=p.data("date-text");function b(t){$.contains(p.get(0),t.target)||(p.removeClass("_open"),app.dom.$document.off("click",b),l&&s?p.hasClass("_changed")&&p.trigger("filter-select"):C())}function k(t){return t&&r&&(t=R[t[0]-1]+t.slice(1)),t||"<span>"+app.l10n[v].emptyValue+"</span>"}function w(){var t=k(l),e=k(s),a=l||s?" - ":"<span> - </span>";i.html(t),n.html(e),f.html(function(t){return _&&(t=_.replace("$$date$$",t)),t}(t+a+e))}function C(t){l=s=void 0,m.add(g).prop("value",""),w(),p.removeClass("_changed  _modified _open"),a.add(o).addClass("_empty"),a[v]("option","maxDate",o[v]("option","maxDate")),o[v]("option","minDate",a[v]("option","minDate")),app.dom.$document.off("click",b),p.trigger("clear-datepicker"),t&&p.hasClass("_changed")&&setTimeout(function(){p.trigger("filter-select")})}function y(){if(p.hasClass("_open"))if(p.offset().left+2*p.outerWidth()/3>2*app.dom.$window.width()/3){if("left"===e.data("pos"))return;e.data("pos","left"),e.css("transform","translateX("+(-e.outerWidth()+f.outerWidth())+"px)")}else if(p.offset().left+p.outerWidth()/3>app.dom.$window.width()/3){if("center"===e.data("pos"))return;e.data("pos","center"),e.css("transform","translateX("+(-e.outerWidth()+f.outerWidth())/2+"px)")}else{if("right"===e.data("pos"))return;e.data("pos","right"),e.css("transform","")}}var x=app.l10n[v].plugin.dateFormat;function W(n,o,e,r){n[v]("option",{yearRange:"-99:+99",changeMonth:!0,changeYear:!0,minDate:p.data("min-date"),maxDate:p.data("max-date"),onSelect:function(t){t!==e.val()&&(e.prop("value",t),e.trigger("input-hook",[{type:"set-value",value:t},!0]))}}),e.on("input-hook",function(t,e,a){if("set-value"===e.type){var i=e.value;r?l=i:s=i,w(),y(),p.addClass("_tab-to _changed").toggleClass("_modified",d!==l||c!==s),n.removeClass("_empty"),o[v]("option",r?"minDate":"maxDate",i),l&&s&&h.removeAttr("disabled"),a||n[v]("setDate",$[v].parseDate(x,i))}else"set-attr"===e.type&&"disabled"===e.attr&&(p.hasClass("_open")&&u.trigger("click"),f.attr("disabled",m.is(":disabled")||g.is(":disabled")))});try{var t=$[v].parseDate(x,e.val()),a=$[v].formatDate(x,t)}catch(t){}if(t)r?l=a:s=a,r?d=p.data("default-value-from")||a:c=p.data("default-value-to")||a,o[v]("option",r?"minDate":"maxDate",t),n[v]("setDate",t);else if(h.attr("disabled",!0),n.addClass("_empty"),r){var i=new Date;i.setMonth(i.getMonth()-1),n[v]("setDate",i)}e.data("datepickerElement",n),n.on("click",function(t){return t.stopPropagation(),!1})}a.add(o)[v](app.l10n[v].plugin),W(o,a,g,!1),W(a,o,m,!0),w(),(d||c)&&p.toggleClass("_modified",d!==l||c!==s),f.attr("disabled",!!m.add(g).is(":disabled")),i.on("click",function(){p.removeClass("_tab-to")}),n.on("click",function(){p.addClass("_tab-to")}),t.on("click",C),p.on("filter-clear",C),f.add(u).add(h).on("click",function(){p.toggleClass("_open"),p.hasClass("_open")?(p.removeClass("_tab-to"),app.dom.$document.off("click",b),app.dom.$document.on("click",b),y()):(e.data("pos",""),l&&s?p.hasClass("_changed")&&p.trigger("filter-select"):C())})})},app.yearpickerPeriod=function(t){app.findWithRoot(t,"[data-yearpicker-period-filter]").each(function(){var n,o,r,l,s=$(this),d=s.find(".datepicker-filter_button"),c=s.find(".datepicker-filter_close"),p=s.find(".datepicker-filter_apply-btn"),t=s.find(".datepicker-filter_clear-btn"),e=s.find(".datepicker-filter_modal"),i=s.find(".datepicker-filter_tab-from"),f=s.find(".datepicker-filter_tab-to"),u=s.find(".datepicker-filter_input-from"),h=s.find(".datepicker-filter_input-to"),a=s.find(".datepicker-filter_datepicker-from"),m=s.find(".datepicker-filter_datepicker-to"),g=$('<div class="ui-yearpicker" />').appendTo(a),v=$('<div class="ui-yearpicker" />').appendTo(m),_=+s.data("min-date")||1970,b=+s.data("max-date")||(new Date).getFullYear();function k(t){$.contains(s.get(0),t.target)||(s.removeClass("_open"),app.dom.$document.off("click",k),r&&l?s.hasClass("_changed")&&s.trigger("filter-select"):x())}function w(t){return t?t+" "+app.l10n.yearpicker.emptyValue.toLocaleLowerCase():"<span>"+app.l10n.yearpicker.emptyValue+"</span>"}function C(){var t=w(r),e=w(l),a=r||l?" - ":"<span> - </span>";i.html(t),f.html(e),d.html(t+a+e)}function y(){[g,v].forEach(function(t,e){var a=!e;t.children().each(function(){var t=+$(this).text();$(this).attr("disabled",a?l<t:t<r),$(this).toggleClass("_active",a?t===r:t===l)})})}function x(t){r=l=void 0,u.add(h).prop("value",""),C(),y(),s.removeClass("_changed _modified _open"),app.dom.$document.off("click",k),s.trigger("clear-datepicker"),t&&s.hasClass("_changed")&&setTimeout(function(){s.trigger("filter-select")})}function W(){if(s.hasClass("_open"))if(s.offset().left+2*s.outerWidth()/3>2*app.dom.$window.width()/3){if("left"===e.data("pos"))return;e.data("pos","left"),e.css("transform","translateX("+(-e.outerWidth()+d.outerWidth())+"px)")}else if(s.offset().left+s.outerWidth()/3>app.dom.$window.width()/3){if("center"===e.data("pos"))return;e.data("pos","center"),e.css("transform","translateX("+(-e.outerWidth()+d.outerWidth())/2+"px)")}else{if("right"===e.data("pos"))return;e.data("pos","right"),e.css("transform","")}}function R(){g.add(v).find("button._active").each(function(){var t=$(this),e=t.parent(),a=t.position(),i=e.scrollTop(),n=e.height();e.scrollTop(i+a.top-n/2)})}function T(t,e){t.empty();for(var a=_;a<=b;a++){$('<button type="button" class="ui-yearpicker-item" />').text(a).appendTo(t).on("click",function(){var t=+$(this).text();e.val(t)})}}function M(){T(g,u),T(v,h),y(),C()}function S(t,e,a){if("option"===t)switch(e){case"maxYear":if(!a)return b;+a?(b=+a,M(),r&&b<l&&h.val(b),l&&l<r&&u.val(l)):console.error("maxYear - expected integer value, but received",a);break;case"minYear":if(!a)return _;+a?(_=+a,r&&r<_&&u.val(_),l&&l<r&&h.val(r),M()):console.error("minYear - expected integer value, but received",a)}}function I(t,e,i){T(t,e),e.on("input-hook",function(t,e){if("set-value"===e.type){var a=+e.value;i?r=a:l=a,C(),W(),y(),s.addClass("_changed").toggleClass("_modified",n!==r||o!==l),i&&f.is(":visible")&&f.trigger("click"),r&&l&&p.removeAttr("disabled")}else"set-attr"===e.type&&"disabled"===e.attr&&(s.hasClass("_open")&&c.trigger("click"),d.attr("disabled",e.value))});try{var a=+e.val()}catch(t){}a?i?r=a:l=a:p.attr("disabled",!0),i?n=+s.data("default-value-from")||a:o=+s.data("default-value-to")||a,e.data("datepickerElement",{yearpicker:S})}I(v,h,!1),I(g,u,!0),C(),y(),(n||o)&&s.toggleClass("_modified",n!==r||o!==l),d.attr("disabled",!!u.add(h).is(":disabled")),i.on("click",function(){s.removeClass("_tab-to"),R()}),f.on("click",function(){s.addClass("_tab-to"),R()}),t.on("click",x),s.on("filter-clear",x),d.add(c).add(p).on("click",function(){s.toggleClass("_open"),s.hasClass("_open")?(s.removeClass("_tab-to"),app.dom.$document.off("click",k),app.dom.$document.on("click",k),R(),W()):(e.data("pos",""),r&&l?s.hasClass("_changed")&&s.trigger("filter-select"):x())})})},app.menu=function(t){var e=app.findWithRoot(t,"[data-menu]"),a=e.find("[data-menu-item]"),i=e.find("[data-menu-item-btn]"),n=app.findWithRoot(t,"[data-menu-show]"),o=app.findWithRoot(t,"[data-menu-close]");function r(){e.removeClass("show"),n.removeClass("_active"),app.dom.$body.removeClass("menu-open")}n.on("click",function(){$(this).hasClass("_active")?r():(app.dom.$body.addClass("menu-open"),e.addClass("show"),n.addClass("_active"),$(this).trigger("open-menu"))}),o.on("click",r),i.on("click",function(){var t=$(this).closest(a);t.hasClass("_active")?t.removeClass("_active"):(a.filter("._active").removeClass("_active"),t.addClass("_active"))})},app.filters=function(t){var a=app.findWithRoot(t,"[data-filter]"),f=a.find("[data-filter-title]"),e=a.find("[data-filter-close]"),i=a.find("[data-filter-content]"),n=app.findWithRoot(t,"form[data-auto-submit]"),o=a.filter('[data-filter="select"]'),r=a.filter('[data-filter="switch"]'),l=app.findWithRoot(t,"[data-select-with-date]"),s=a.filter('[data-filter="checkboxes"]');function u(){a.removeClass("right-content"),a.each(function(){var t=$(this);t[0].getBoundingClientRect().left>document.documentElement.clientWidth-t[0].getBoundingClientRect().left-t.width()&&t.addClass("right-content")})}function d(t){return Math.ceil(t.innerWidth())<Math.floor(t[0].scrollWidth)}function h(t,e){d(t)?t.attr("title",e):t.removeAttr("title")}if(a.length&&(u(),app.dom.$window.resize(u)),window.localStorage)try{var c=JSON.parse(localStorage.getItem("submit-scroll"));c&&c.pathname===location.pathname&&app.dom.$window.scrollTop(c.scrollTop),localStorage.removeItem("submit-scroll")}catch(t){}function m(t,e){!e&&t.data("modified")&&t.trigger("filter-select"),t.removeClass("open").find(i).hide()}function g(t){return t.contents().filter(function(){return 3===this.nodeType}).first()}n.on("filter-select",function(){window.localStorage&&localStorage.setItem("submit-scroll",JSON.stringify({pathname:location.pathname,scrollTop:app.dom.$window.scrollTop()})),$(this).submit()}),e.on("click",function(){m($(this).closest(a))}),f.on("click",function(){var t=$(this).closest(a);t.hasClass("open")?t.find(i).hide():(t.find(i).show(),t.find(".filter-select_search").length&&t.find(".filter-select_search input").prop("value","").trigger("input").focus()),t.toggleClass("open")}),app.dom.$document.click(function(e){a.each(function(){var t=$(this);$(e.target).closest(t).length||m(t)})}),r.each(function(){var e=$(this),t=e.find("label:eq(0)"),a=e.find("div:first-child:eq(0)"),i=e.find("input"),n=e.is("[data-default-value]");function o(t){$(t.target).trigger("filter-select"),e.toggleClass("_changed",n!==i.is(":checked"))}d(a)||t.removeAttr("title"),e.toggleClass("_changed",n!==i.is(":checked")),i.on("change",o),i.on("input-hook",o)}),l.on("select-date",function(t,e,a){var i=$(this);i.addClass("_date").data("last-checked",e),a||setTimeout(function(){i.find(".datepicker-filter_button").trigger("click")})}),l.on("clear-datepicker",function(){function t(t){t.stopPropagation()}var e=$(this),a=e.find('[data-filter="select"]'),i=a.data("default-value");void 0===i&&(i=a.find("input:radio:eq(0)").val()),"number"==typeof i&&(i=String(i));var n=a.find('input:radio[value="'+i+'"]'),o=e.data("last-checked")||n;e.removeClass("_date"),o.prop("checked",!0).on("filter-select",t),e.find('[data-filter="select"]').removeClass("_changed"),setTimeout(function(){e.off("filter-select",t)})}),jQuery.expr[":"].Contains=function(t,e,a){return-1!==(t.textContent||t.innerText||"").toUpperCase().indexOf(a[3].toUpperCase())},o.each(function(){var a,i,n,o,r=$(this),l=r.find(f),t=r.find('input[type="radio"]'),s="",d=null,e=r.find(".filter-select_search input");function c(t,e){$this=$(t.target),$this.is("input:radio")&&(d=$this.siblings("label"),s=d.text(),d.find(".filter-select_option_text").length&&(s=s.replace(d.find(".filter-select_option_text").text(),"")),l.text(s),h(l,s),u(),a=i,i=$this,r.toggleClass("_changed",n!==i.val()),r.data("modified",!$this.is("[data-select-date]")&&o!==i.val()),m(r,$this.is("[data-select-date]")||!!e),$this.is("[data-select-date]")&&$this.trigger("select-date",[a]))}t.filter(":checked").length||t.first().prop("checked",!0),d=t.filter(":checked").siblings("label"),s=d.text(),d.find(".filter-select_option_text").length&&(s=s.replace(d.find(".filter-select_option_text").text(),"")),l.text(s),h(l,s),r.removeAttr("title"),u(),i=a=t.filter(":checked:eq(0)"),o=i.val(),void 0===(n=r.data("default-value"))&&(n=o),"number"==typeof n&&(n=String(n)),r.toggleClass("_changed",n!==i.val()),i.is("[data-select-date]")&&i.trigger("select-date",[null,!0]),r.on("change",c),r.on("input-hook",c),function(){if(!e.length)return;var a=r.find(".filter-select_search_empty"),i=null;e.on("input",function(){var t=r.find(".filter-select_option"),e=$(this).val();return e?(i=t.find("label:Contains("+e+")").closest(".filter-select_option"),t.not(i).hide(),i.show(),i.length?a.hide():a.show(),i.each(function(){var t=$(this).find("label");t.html(t.html().replace(/<b>([^<]*)<\/b>/gi,"$1")),t.html(t.html().replace(new RegExp(e,"i"),"<b>$&</b>")),$(this).parents(".level").each(function(){var t=$(this).prev(".filter-select_option").first();t.html(t.html().replace(/<b>([^<]*)<\/b>/gi,"$1")),t.html(t.html().replace(new RegExp(e,"i"),"<b>$&</b>")),t.show()})})):(t.each(function(){var t=$(this).find("label");t.html(t.html().replace(/<b>([^<]*)<\/b>/gi,"$1"))}),a.hide(),t.show()),!1})}()}),s.each(function(){var t,e,a=$(this),i=a.find(f),n=a.find("[data-filter-btn]"),o=a.find("[data-filter-counter]"),r=a.find(".filter_placeholder"),l=a.find("input"),s=0,d=r.text();function c(){return a.find("input").filter(":checked").map(function(){return $(this).attr("value")}).get().join()}function p(){s=a.find("input").filter(":checked").length||"",o.text(s),g(i).replaceWith(s?app.l10n.filter.selected:d),u(),a.toggleClass("_changed",t!==c()),r.toggleClass("_hide",!s),a.data("modified",e!==c())}s=l.filter(":checked").length||"",o.text(s),g(i).replaceWith(s?app.l10n.filter.selected:d),r.toggleClass("_hide",!s),u(),h(i,i.attr("title")),e=c(),void 0===(t=a.data("default-value"))&&(t=e),"number"==typeof t&&(t=String(t)),a.toggleClass("_changed",t!==c()),a.on("change",p),a.on("input-hook",p),n.on("click",function(){m(a)})})},app.orgStructure=function(t){app.findWithRoot(t,".org-structure_el_icon, .org-structure_el_position:not(a)").on("click",function(){var t=$(this).closest(".org-structure_el");t.hasClass("open")?t.removeClass("open").find(".org-structure_el").removeClass("open"):t.addClass("open")});var a=app.findWithRoot(t,".org-structure"),e=a.find(".org-structure_search input"),i=a.find(".org-structure_main"),n=app.findWithRoot(t,".org-structure_el_position, .org-structure_el_name"),o=".org-structure_el, .org-structure_main";e.on("input",function(){a.find(o).removeClass("_visible open"),n.each(function(){$(this).html($(this).html().replace(/<mark>([^<]*)<\/mark>/gi,"$1"))});var t=$(this).val();if(3<=t.length){i.addClass("_onsearch"),t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var e=new RegExp(t,"ig");n.filter(function(){return e.test($(this).html())}).each(function(){$(this).addClass("_visible").html($(this).html().replace(e,"<mark>$&</mark>")).parentsUntil(a,o).addClass("_visible").filter(":not(:eq(0))").addClass("open")})}else i.removeClass("_onsearch")})},app.calendar=function(t){var a=app.findWithRoot(t,".calendar_weekdays"),i=a.parent(),n=app.findWithRoot(t,".excursion_submit"),o=n.parent();if(a.length&&n.length){function e(){if(!i.length)return!1;var t=i[0].getBoundingClientRect();t.top>app.dom.$header.height()||t.bottom<a.outerHeight()?a.removeClass("_fixed").width(""):t.top<=0&&a.addClass("_fixed").width(t.width);var e=o[0].getBoundingClientRect();e.bottom-app.dom.$window.height()+n.outerHeight()<=0?n.removeClass("_fixed").width(""):0<=e.bottom-app.dom.$window.height()&&n.addClass("_fixed").width(e.width)}e(),app.dom.$window.on("scroll",e),app.dom.$window.on("resize",function(){a.hasClass("_fixed")&&a.width(i.width()),n.hasClass("_fixed")&&n.width(o.width())});var r=app.findWithRoot(t,"input.calendar_time_input"),l=app.findWithRoot(t,"input.excursion_submit_captcha_input"),s=app.findWithRoot(t,"input.excursion_submit_button");r.add(l).on("change input",function(){var t=r.is(":checked");t&&n.addClass("_active"),t&&l.val()?s.attr("disabled",!1):s.attr("disabled",!0)})}},app.ajaxNews=function(t){var n=1;app.findWithRoot(t,"[data-news-ajax-url]").click(function(){var e=$(this),a=e.prev(),t=e.data("news-ajax-url"),i=0<=t.indexOf("?")?"&":"?";t+=i+"page="+n++,e.attr("disabled",!0).addClass("_loading"),$.ajax({url:t,dataType:"json"}).done(function(t){t.items.forEach(function(t){$('<div class="news _in-feed news-speeches col-md-17"><div class="news_text"><div class="news_info"><div class="news_date">'+t.date+'</div><div class="news_category">'+t.category+'</div></div><div class="news_title"><a href="'+t.href+'">'+t.title+"</a></div></div>"+(t.image?'<a href="'+t.href+'" class="col-md-5 offset-md-1 news_image'+(t.video?" _with-video":"")+'"><img src="'+t.image+'" /></a>':"")+"</div>").appendTo(a)}),t.isLast&&e.remove()}).always(function(){e.attr("disabled",!1).removeClass("_loading")})})},app.ajaxPreviews=function(n){var o=1;app.findWithRoot(n,"[data-previews-ajax-url]").click(function(){var e=$(this),a=app.findWithRoot(n,"#previews-ajax-container"),t=e.data("previews-ajax-url"),i=0<=t.indexOf("?")?"&":"?";t+=i+"page="+o++,e.attr("disabled",!0).addClass("_loading"),$.ajax({url:t,dataType:"json"}).done(function(t){t.items.forEach(function(t){$('<div class="home-previews_day">  <div class="row">    <div class="col-md-3">      <div class="home-previews_day-date">'+t.date+'</div>    </div>    <div class="col-md-19 offset-md-1">'+t.elements.map(function(t){return'<div class="home-previews_item">  <div class="row">    <div class="col-md-1">      <div class="home-previews_item-time">'+t.time+'</div>    </div>    <div class="col-md-15 offset-md-1">      <div class="home-previews_item-title">        <a href="'+t.href+'">'+t.title+"</a>      </div>    </div>"+(t.important?'<div class="home-previews_item-icon offset-md-1 icon-important"></div>':"")+'  </div>  <div class="offset-md-2 row home-previews_item-source_wrap">    <div class="home-previews_item-source">'+t.source+"</div>  </div></div>"}).join("")+"    </div>  </div></div>").appendTo(a)}),t.isLast&&e.remove()}).always(function(){e.attr("disabled",!1).removeClass("_loading")})})},app.ajaxAbout=function(t){var i=1;app.findWithRoot(t,"[data-about-ajax-url]").click(function(){var e=$(this),t=e.data("about-ajax-url"),a=0<=t.indexOf("?")?"&":"?";t+=a+"page="+i++,e.attr("disabled",!0).addClass("_loading"),$.ajax({url:t,dataType:"json"}).done(function(t){t.items.forEach(function(t){$('<div class="document-regular">  <div class="document-regular_inner">    <div class="document-regular_top">      <div class="document-regular_left_icon"></div>      <div class="document-regular_date">'+t.date+'</div>    </div>    <div class="body-2 document-regular_main">      <div class="document-regular_texts">        <div class="document-regular_name">        \t<a href="'+t.link+'"><span class="document-regular_name_visible">'+t.text+'</span></a>        </div>        <div class="document-regular_comment"></div>      </div>    </div>  </div></div>').insertBefore(e)}),t.isLast&&e.remove()}).always(function(){e.attr("disabled",!1).removeClass("_loading")})})},app.ajaxCross=function(t){$(t).find("[data-cross-ajax-url]").click(function(){var i=$(this),n=i.prev(),t=i.data("cross-ajax-url");i.attr("disabled",!0).addClass("_loading"),$.ajax({url:t,dataType:"html"}).done(function(t){var e=$(t);e.appendTo(n);var a=e.data("cross-ajax-url");a?i.data("cross-ajax-url",a):i.remove(),e.trigger("new-html")}).always(function(){i.attr("disabled",!1).removeClass("_loading")})})},app.shareBtn=function(t){app.findWithRoot(t,"[data-share-btn]").on("click",function(e){var a=$(this),i=a.next();if(i.toggleClass("_hide"),!i.hasClass("_hide")){var n=function(t){$.contains(a.parent().get(0),t.target)||e===t||(i.addClass("_hide"),$(document).off("click",n))};$(document).on("click",n)}})},app.tables=function(e){app.findWithRoot(e,"[data-table-fixed] table:first").floatThead({responsiveContainer:function(t){return t.closest("[data-table-fixed]")},debug:!0,zIndex:10}),app.findWithRoot(e,"table.data, table.CBRTBL").each(function(){var n=[];$(this).find("tr").each(function(){for(var i=[],t=n.length-1;0<=t;t--)n[t].span--;$(this).find("td").each(function(){var t=$(this),e=t.attr("rowspan");t.data("linked_td",$.merge([],i));for(var a=i.length-1;0<=a;a--)i[a].data("linked_td").push(t);for(a=n.length-1;0<=a;a--)0<n[a].span&&(t.data("linked_td").push(n[a].$td),n[a].$td.data("linked_td").push(t));1<(e=e||1)&&n.push({span:e,$td:t}),i.push(t),t.mouseover(function(){var t=$(this).addClass("hover").data("linked_td");if(t)for(var e=t.length-1;0<=e;e--)t[e].addClass("hover")}),t.mouseout(function(){var t=$(this).removeClass("hover").data("linked_td");if(t)for(var e=t.length-1;0<=e;e--)t[e].removeClass("hover")})})})}),app.findWithRoot(e,".table-with-documents .toggle-button").on("click",function(){$(this).toggleClass("_active").closest("tr").toggleClass("_open")}),updateTablesWithDocuments=function(){var t=app.dom.$window.width()<1024;app.findWithRoot(e,".table-with-documents_files").each(function(){$(this).children("td:last").attr("colspan",t?$(this).find("td").length:1)})},updateTablesWithDocuments(),app.dom.$window.resize(updateTablesWithDocuments)},app.topLine=function(t){var e=app.findWithRoot(t,"[data-top-line]");e.length&&app.dom.$window.on("scroll",function(){app.dom.$window.scrollTop()>app.dom.$header.height()&&-1===app.utils.getDirection.direction?(e.addClass("_show"),$("body").addClass("header-fixed")):(e.removeClass("_show"),$("body").removeClass("header-fixed"))})},app.homeMenuButton=function(t){var e=app.findWithRoot(t,".header_menu, .banner-header"),a=app.findWithRoot(t,".home-header_content, .banner-header");function i(){app.dom.$window.scrollTop()<a.outerHeight()/2?e.addClass("_white"):e.removeClass("_white")}e.length&&(i(),app.dom.$window.on("scroll",i))},app.tips=function(t){app.findWithRoot(t,"[data-tooltip]").each(function(){var t=$(this),e=t.data("tooltipType"),a=t.data("tooltipClass")||"";switch(e){case"black":t.tooltip({position:{my:t.data("tooltip-position")||"left top+15",at:"left bottom",collision:"none"},items:"[data-tooltip]",classes:{"ui-tooltip":"black "+a},content:function(){var t=$(this);return t.is("[data-tooltip-content]")?t.data("tooltipContent"):t.is("[title]")?t.attr("title"):void 0},open:function(t,e){var a,i=$(t.target);i.attr("data-tooltip-content")&&($(t.target).removeAttr("title"),$(t.target).unbind("mouseleave"),e.tooltip.on("mouseenter",function(){clearTimeout(a)}),e.tooltip.on("mouseleave",function(){n()}),i.on("mouseleave",function(){n()}));function n(){a=setTimeout(function(){i.tooltip("close")},150)}},hide:{duration:300}});break;case"blackCenter":t.tooltip({position:{my:t.data("tooltip-position")||"center top+15",at:"center bottom",collision:"none"},items:"[data-tooltip]",classes:{"ui-tooltip":"black center "+a},content:function(){var t=$(this);return t.is("[data-tooltip-content]")?t.data("tooltipContent"):t.is("[title]")?t.attr("title"):void 0},open:function(t,e){var a,i=$(t.target);i.attr("data-tooltip-content")&&($(t.target).removeAttr("title"),$(t.target).unbind("mouseleave"),e.tooltip.on("mouseenter",function(){clearTimeout(a)}),e.tooltip.on("mouseleave",function(){n()}),i.on("mouseleave",function(){n()}));function n(){a=setTimeout(function(){i.tooltip("close")},150)}},hide:{duration:300}});break;default:t.tooltip({position:{my:t.data("tooltip-position")||"left-16 top+15",at:"left bottom",collision:"none"},items:"[data-tooltip]",classes:{"ui-tooltip":a},content:function(){var t=$(this);return t.is("[data-tooltip-content]")?t.data("tooltipContent"):t.is("[title]")?t.attr("title"):void 0},open:function(t,e){var a,i=$(t.target);i.attr("data-tooltip-content")&&($(t.target).removeAttr("title"),$(t.target).unbind("mouseleave"),e.tooltip.on("mouseenter",function(){clearTimeout(a)}),e.tooltip.on("mouseleave",function(){n()}),i.on("mouseleave",function(){n()}));function n(){a=setTimeout(function(){i.tooltip("close")},150)}},hide:{duration:300}})}})},app.tabsWithFilters=function(t){app.findWithRoot(t,".tabs_filters_wrap").each(function(){var t=$(this),e=t.find(".tabs_filters_btn"),a=t.find(".tabs_filters");e.on("click",function(){$(this).toggleClass("_active"),a.toggle()})})},app.homeTabs=function(r){app.findWithRoot(r,"[data-home-tabs]").each(function(){var t=$(this),i=t.find("[data-tabs-tab]"),n=t.find("[data-tabs-mobile-selected]"),o=t.find("[data-tabs-content]");n.on("click",function(){n.toggleClass("_active"),app.findWithRoot(r,".tabs_items").toggle()}),i.on("click",function(t){t.preventDefault(),app.findWithRoot(r,".tabs_items").hide(),n.removeClass("_active");var e=$(this);if(e.hasClass("_active"))return!1;var a=e.data("tabsTab");i.removeClass("_active"),e.addClass("_active"),n.text(e.text()),o.hide().filter('[data-tabs-content="'+a+'"]').show()})})},app.tabs=function(t){var e=app.findWithRoot(t,"[data-tabs]");if(e.length&&(e.each(function(){var t=$(this),e=t.find("[data-tabs-tab]"),a=e.filter("._active"),i=t.find("[data-tabs-rest]"),n=t.find("[data-tabs-rest-title]"),o=t.find("[data-tabs-content]");n.data("default-title",n.text()),e.on("click",function(t){t.preventDefault(),r($(this))}),n.on("click",function(t){i.toggleClass("_open")}),a.length&&r(a,!0),e.on("open-tab",function(){return r($(this)),!1}),o.on("open-anchor",function(t){$(t.target);r(e.filter('[data-tabs-tab="'+$(this).data("tabsContent")+'"]'))})}),location.hash)){var a=$('[href = "'+location.hash+'"][data-tabs-tab]');a.length&&r(a.first())}function r(t,e){var a=t.closest("[data-tabs]"),i=a.find("[data-tabs-tab]"),n=a.find("[data-tabs-rest]"),o=a.find("[data-tabs-rest-title]"),r=a.find("[data-tabs-content]"),l=a.find("[data-tabs]");if(l.length){function s(){return 0===l.has($(this)).length}i=i.filter(s),n=n.filter(s),o=o.filter(s),r=r.filter(s)}if(t.hasClass("_active")&&!e)return!1;i.removeClass("_active"),t.addClass("_active"),r.hide().filter('[data-tabs-content="'+t.data("tabsTab")+'"]').show().trigger("show-hidden"),!e&&/^#.+$/.test(t.attr("href"))&&(location.hash=t.attr("href")),t.closest(n).length?(n.removeClass("_open").addClass("_active"),o.text(t.text())):(n.removeClass("_open _active"),o.text(o.data("default-title")))}},app.gotoUp=function(t){app.findWithRoot(t,".gotoUp").on("click",function(t){t.preventDefault(),$("html, body").animate({scrollTop:0},500)})},app.dropdown=function(t){var e=app.findWithRoot(t,".dropdown_title"),a=e.siblings(".dropdown_content");e.length&&(e.on("click",function(){$(this).toggleClass("_active").siblings(".dropdown_content").toggle(),$(this).hasClass("_active")&&$(this).trigger("show-hidden")}),a.on("open-anchor",function(t){$(t.target);$(this).show().trigger("show-hidden").siblings(".dropdown_title").addClass("_active")}),a.parent().on("set-dropdown-open",function(t,e){return $(this).children(".dropdown_content").toggle(e),$(this).children(".dropdown_title").toggleClass("_active",e),e&&$(this).children(".dropdown_content").trigger("show-hidden"),!1}))},app.toggle=function(t){app.findWithRoot(t,"[data-toggle-btn]").each(function(){var e=$(this),a=e.closest("[data-toggle]").find("[data-toggle-content]");function t(t){null!=t&&t===e.hasClass("active")||(e.toggleClass("_active"),a.slideToggle())}e.on("click",function(){t()}),a.on("open-anchor",function(){t(!0)})}),app.findWithRoot(t,"[data-toggle-class-btn]").each(function(){var a=$(this),t=a.closest("[data-toggle]"),i=t.find("[data-toggle-content]").filter(function(){return $(this).closest("[data-toggle]").is(t)});function e(t){if(null==t||t!==a.hasClass("active")){var e=a.data("toggleClassBtn")||"_active";a.toggleClass("_active"),i.toggleClass(e),i.hasClass(e)&&i.trigger("show-hidden")}}a.on("click",function(){e()}),i.on("open-anchor",function(){e(!0)})})},app.toggleSelectPopup=function(t){var e=app.findWithRoot(t,"[data-toggle-popup]").find("[data-toggle-content]"),a=app.findWithRoot(t,"[data-toggle-popup-class-btn]");app.findWithRoot(t,"[data-toggle-popup-class-btn]").on("click",function(){var t=$(this).data("toggleClassBtn")||"_active";$(this).toggleClass("_active"),$(this).closest("[data-toggle-popup]").find("[data-toggle-content]").toggleClass(t)}),e.length&&app.dom.$document.click(function(t){!e.is(":visible")||$(t.target).closest(e).length||$(t.target).closest(a).length||(e.removeClass("_active"),a.removeClass("_active"))})},app.helpful=function(t){app.findWithRoot(t,"[data-helpful]").each(function(){var t=$(this),e=t.find("[data-helpful-btn]"),a=t.siblings("[data-reason]"),i=t.siblings("[data-thankfulness]"),n=null,o=null,r=null,l=null,s=null;function d(){var t=a.find('input[type="radio"]:checked'),e=t.is(".radio_another_button")?n.val():void 0;a.trigger("dislike-reason",{value:t.val(),message:e}),a.hide(),i.show()}e.on("click",function(){var t=$(this);if(t.hasClass("_active")||t.siblings("[data-helpful-btn]").hasClass("_active"))return!1;t.siblings("[data-helpful-btn]").addClass("_disabled"),t.addClass("_active"),"no"===t.data("helpfulBtn")&&a.length&&(a.show(),n=a.find("[data-reason-another-message]"),r=a.find('input[type="radio"]').not(".radio_another_reason"),o=a.find('input[type="radio"].radio_another_reason'),s=a.find("[data-reason-another-btn]"),n.on("input",function(){l=!$.trim(n.val()),s.prop("disabled",l)}),r.on("change",d),o.on("change",function(){n.focus()}),s.on("click",function(){$(this).not(":disabled")&&d()}))})})},app.searchHelpful=function(t){app.findWithRoot(t,"[data-search-helpful]").each(function(){var t=$(this),e=t.find("[data-helpful-btn]"),a=t.siblings("[data-reason]"),i=t.siblings("[data-thankfulness]"),n=null,o=null,r=null,l=null,s=null;e.on("click",function(){var t=$(this);if(t.hasClass("_active")||t.siblings("[data-helpful-btn]").hasClass("_active"))return!1;if(t.siblings("[data-helpful-btn]").addClass("_disabled"),t.addClass("_active"),"no"===t.data("helpfulBtn")&&a.length){function e(){l=!$(this).is(r)&&!$.trim(n.val()),s.prop("disabled",l)}a.show(),n=a.find("[data-reason-another-message]"),r=a.find('input[type="radio"]').not(".radio_another_reason"),o=a.find('input[type="radio"].radio_another_reason'),s=a.find("[data-reason-another-btn]"),n.on("input",e),r.on("change",e),o.on("change",function(){n.focus(),e()}),s.on("click",function(){$(this).not(":disabled")&&function(){var t=a.find('input[type="radio"]:checked'),e=t.is(".radio_another_button")?n.val():void 0;a.trigger("dislike-search-reason",{value:t.val(),message:e}),a.hide(),i.show()}()})}})})},app.requestHelpful=function(t){app.findWithRoot(t,"[data-request-helpful]").each(function(){var t=$(this),e=t.find("[data-request-helpful-btn]"),a=t.find("[data-request-helpful-greeting]"),i=t.find("[data-reason]"),n=i.find("[data-reason-another-message]"),o=i.find('input[type="radio"].radio_another_reason');e.on("click",function(t){t.preventDefault(),a.hide(),i.show(),o.on("change",function(){n.focus()})})})},app.selectItem=function(t){app.findWithRoot(t,".select_item").on("change",function(){var t=this,e=$(t).parent().parent(),a=e.find("[data-item-select]"),i=t.options.selectedIndex;e.find(".chosen_list").toggleClass("chosen_list"),a.each(function(){t.options[i].value!==this.dataset.itemSelect||this.classList.add("chosen_list")})})},app.versions=function(t){app.findWithRoot(t,"[data-versions]").each(function(){var e=$(this),n=e.find("[data-versions-toggle]"),t=e.find("[data-versions-select]"),o=e.find("[data-versions-items]");o.filter("._active").length&&t.val(o.filter("._active").data("versionsItems")),t.on("change",function(){var t=$(this).val();o.removeClass("_active").filter('[data-versions-items="'+t+'"]').addClass("_active"),i()}),n.on("click",function(){$(this).toggleClass("_active"),o.filter("._active").toggleClass("_hidden")}),app.dom.$document.on("show-hidden",function(t){$(t.target).has(e).length&&i()}),i(),app.dom.$window.resize(i);var a=o.filter("._active").find("[data-versions-item]._active:eq(0)");function i(){if(n.hasClass("_active"))return!1;var t=o.filter("._active"),e=t.find("[data-versions-item]"),a=t.width(),i=0;e.each(function(){i+=$(this).outerWidth(!0)}),parseInt(i)>parseInt(a)?(n.show(),t.addClass("_hidden")):(n.hide(),t.removeClass("_hidden"))}a.length&&a.offset().top-1>a.parent().offset().top&&(n.toggleClass("_active"),o.filter("._active").toggleClass("_hidden"))})},app.imageSlider=function(t){app.findWithRoot(t,".image-slider").each(function(){var t=$(this),e=t.find(".swiper-container"),a=t.find(".image-slider_pagination"),i=t.find(".image-slider_caption"),n=t.find(".image-slider_slide img"),o=t.find("._next"),r=t.find("._prev"),l=new Swiper(e[0],{on:{init:function(){i.text(n.first().attr("alt"))},slideChange:function(){l&&i.text(n.eq(l.realIndex).attr("alt")||"")}},slidesPerView:1,spaceBetween:40,loop:!0,effect:"fade",pagination:{el:a,type:"custom",renderCustom:function(t,e,a){return e+" / "+a}},navigation:{nextEl:o,prevEl:r}})})},app.materialsGall=function(t){function d(t){if(!t.length)return!1;var e=0;t.css({"min-height":0}),t.each(function(){currentHeight=$(this).innerHeight(),currentHeight>e&&(e=currentHeight)}),t.css({"min-height":e})}app.findWithRoot(t,".materials").each(function(){var t=$(this),e=t.find(".materials_gall"),a=t.find(".materials_nav"),i=a.find("._next"),n=a.find("._prev"),o=t.find(".swiper-slide");if(!o.length)return!1;o.length<5&&a.hide();var r=50,l=o.first(),s=new Swiper(e[0],{on:{init:function(){d(t.find(".material-external"))}},slidesPerView:4,spaceBetween:50,navigation:{nextEl:i,prevEl:n},breakpoints:{1023:{slidesPerView:"auto",spaceBetween:16}}});$(window).resize(function(){r=1023<app.dom.$window.width()?l.outerWidth()/5||50:16,slidesPerView=1023<app.dom.$window.width()?4:"auto",s.params.spaceBetween=r,s.params.slidesPerView=slidesPerView,s.updateSlides(),d(t.find(".material-external"))})})},app.homeBannersGall=function(t){var e=app.findWithRoot(t,"[data-home-banners-gall]");new Swiper(e[0],{slidesPerView:"auto",spaceBetween:16})},app.bannersGall=function(t){app.findWithRoot(t,"[data-banners-gall]").each(function(){var t=$(this);t.find(".swiper-slide"),new Swiper(t[0],{slidesPerView:"auto",spaceBetween:16})})},app.homeContentAnimation=function(t){var a=400,i=150,n=app.findWithRoot(t,".home-content");if(!n.length)return!1;var e,o=app.findWithRoot(t,".home-header_shadow");function r(){var t=$(document).scrollTop();t<=2*a&&l(t)}function l(t){var e=Math.min(t/a,1)*i-150;n.css({transform:e?"translate(0,"+e+"px)":""}),o.css({"box-shadow":"0px "+a+"px 0px "+a+"px rgba(0,0,0,"+(1-Math.min(t/a,1))+")"})}setTimeout(function(){l($(document).scrollTop())}),app.dom.$window.scroll(function(){r(),clearTimeout(e),e=setTimeout(r,500)})},app.homeHeaderGall=function(t){var e=app.findWithRoot(t,".home-header"),a=app.findWithRoot(t,".home-header_gall");if(!a.length)return!1;var i=app.findWithRoot(t,".home-header_nav_btns"),n=i.find("._next"),o=i.find("._prev"),r=app.findWithRoot(t,".home-header_nav_progress_bar"),l=app.findWithRoot(t,"[data-home-search]"),s=app.findWithRoot(t,".home-header_search_inp"),d=5e3,c=null,p=0,f=!1,u=app.findWithRoot(t,".home-header_main._desktop .swiper-slide"),h="";if(u.each(function(){h=h+'<div class="swiper-slide">\n              <div class="home-header_gall_slide" style="background-image:url('+$(this).data("backgroundImage")+');"></div>\n            </div>'}),$('<div class="home-header_gall_wrap">\n        <div class="swiper-container home-header_photo_gall">\n          <div class="swiper-wrapper">\n'+h+"          </div>\n        </div>\n      </div>").prependTo(".home-header"),u.length<2)return e.addClass("_one-slide"),!1;var m=new Swiper(app.findWithRoot(t,".home-header_photo_gall")[0],{slidesPerView:1,initialSlide:0,loop:!0});l.css("opacity",0);var g=!0,v=new Swiper(a[0],{slidesPerView:1,loop:!0,effect:"fade",initialSlide:0,simulateTouch:!1,autoplay:{delay:d,disableOnInteraction:!1},on:{progress:_,slideChange:function(){if(v){var t=0===v.realIndex;t!==g&&(t||l.removeClass("_hide"),l.animate({opacity:t?0:1},150,function(){t&&l.addClass("_hide")}),g=t),m.slideTo(v.realIndex+1)}}},navigation:{nextEl:n,prevEl:o},pagination:{el:".home-header_nav_pag",type:"custom",renderCustom:function(t,e,a){return e+" / "+a}}});function _(){if(f)return!1;clearInterval(c),p=0,c=setInterval(function(){p=Math.min(p+1,100),r.css({width:p+"%"})},d/100)}function b(){f=!0,v.autoplay.stop(),clearInterval(c),r.css({width:0})}a.on("mouseover",".home-header_nav_btns",b),a.on("mouseout",".home-header_nav_btns",b),a.on("focus",".home-header_search_inp",b),a.on("blur",".home-header_search_inp",function(){s.val()||(f=!1,v.autoplay.start(),_())})},app.homeHeaderGallMobile=function(t){var e=app.findWithRoot(t,".home-header"),a=app.findWithRoot(t,".home-header_gall_mobile"),i=null,n=0,o=null,r=a.find(".swiper-pagination"),l=app.findWithRoot(t,".home-header_main._mobile .swiper-slide"),s="";if(0===l.length)return e.addClass("_no-mobile-slider"),!1;if(l.each(function(){s=s+'<div class="swiper-slide">\n              <div class="home-header_gall_slide" style="background-image:url('+$(this).data("backgroundImage")+');"></div>\n            </div>'}),$('<div class="home-header_gall_wrap _mobile">\n        <div class="swiper-container home-header_photo_gall _mobile">\n          <div class="swiper-wrapper">\n'+s+"          </div>\n        </div>\n      </div>").prependTo(".home-header"),1===l.length)return e.addClass("_one-slide-mobile"),!1;var d=new Swiper(app.findWithRoot(t,".home-header_photo_gall._mobile")[0],{slidesPerView:1,loop:!0}),c=new Swiper(a[0],{slidesPerView:1,loop:!0,effect:"fade",autoplay:{delay:5e3,disableOnInteraction:!1},on:{slideChange:function(){c&&(d.slideTo(c.realIndex+1),o&&a.find(".swiper-pagination-bullet-active").append(o))},progress:p,init:function(){setTimeout(function(){o=$('<span class="pagination-progress" />'),a.find(".swiper-pagination-bullet-active").append(o),p()},200)}},pagination:{el:r}});function p(){if(!o)return!1;clearInterval(i),n=0,i=setInterval(function(){n=Math.min(n+1,100),o.css({width:n+"%"})},50)}},app.openAnchor=function(t){if(app.findWithRoot(t,'a[href *= "#"]').not('[href $= "#"]').on("click",function(t){var e=$(this).attr("href").replace(/^[^#]*/,""),a=$(e);a.length&&a.trigger("open-anchor",[!0])}),app.dom.$document.on("open-anchor",function(t,e){if(e){var a=$(t.target);$("html, body").animate({scrollTop:a.offset().top-app.dom.$window.height()/2},500)}}),location.hash){var e=$(location.hash);e.length&&setTimeout(function(){e.trigger("open-anchor",[!0])},500)}},app.rouble=function(t){app.findWithRoot(t,".ruble_download_buffer_link").on("click",function(t){t.preventDefault(),function(t){var e=$("<input>");$("body").append(e),e.val($(t).text()).select(),document.execCommand("copy"),e.remove()}(".ruble_symbol")})},app.searchForm=function(e){var a=app.findWithRoot(e,"[data-search-form]"),t=a.find("[data-search-form-input]"),i=a.find("[data-search-form-btn]"),n=app.findWithRoot(e,"[data-search-form-show]"),o=!1;$.trim(t.val())||i.prop("disabled",!0),t.keyup(function(){o=!$.trim(t.val()),i.prop("disabled",o)}),n.on("click",function(t){t.preventDefault(),app.dom.$body.addClass("blackout"),app.findWithRoot(e,"[data-menu-close]").trigger("click"),a.show()}),app.dom.$document.click(function(t){!a.is(":visible")||$(t.target).closest(a).length||$(t.target).closest(n).length||(app.dom.$body.removeClass("blackout"),a.hide())})},app.textareaCounter=function(t){app.findWithRoot(t,"textarea[maxlength], textarea[data-maxlength], textarea[data-val-maxlength-max]").each(function(){var t=$(this),e=parseInt(t.attr("maxlength")||t.data("maxlength")||t.data("val-maxlength-max"),10),a=t.val().replace(/\n/g,"\r\n").length;t.removeAttr("maxlength");var i=$('<div class="textarea_counter">'+app.l10n.textarea.charsLeft+" "+app.formatNumber(e-a)+"</div>");function n(){(a=t.val().replace(/\n/g,"\r\n").length)<=e?i.text(app.l10n.textarea.charsLeft+" "+app.formatNumber(e-a)):i.text(app.l10n.textarea.extraChars+" "+app.formatNumber(a-e))}i.insertAfter(t),t.on("input",n),t.on("input-hook",n),t.on("change",function(){t.trigger("filter-select")})})},app.addField=function(t){var i=app.findWithRoot(t,"[data-add-field]");i.each(function(){var t=$(this),e=t.find("[data-add-field-items]"),a=t.find("[data-add-field-template]");t.find("[data-add-field-btn]").on("click",function(t){t.preventDefault(),a.clone().attr("data-text-input","").appendTo(e).removeAttr("data-add-field-template").trigger("new-html")}),i.on("click","[data-add-field-delete]",function(){$(this).closest(".add-field_template").remove()})})},app.export=function(t){var a=app.findWithRoot(t,".b-export");app.findWithRoot(t,"button.b-export_button").on("click",function(t){t.preventDefault();var e=$(this).closest(a);e.toggleClass("_open"),e.hasClass("_open")&&(e.offset().left+e.width()/2>app.dom.$window.width()/2?e.addClass("_right"):e.removeClass("_right"))}),$(document).click(function(t){a.each(function(){0===$(this).has(t.target).length&&$(this).removeClass("_open")})})},app.imageZoom=function(t){OpenSeadragon($.extend({id:"imageZoom",prefixUrl:"/common/images/openseadragon/",autoHideControls:!1,showFullPageControl:!1,minZoomImageRatio:.1},t))};